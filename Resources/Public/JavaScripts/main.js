"use strict";document.addEventListener("DOMContentLoaded",function(){var e,s,t,o=document.querySelector(".mobile-menu"),i=document.querySelector(".app-menu-container"),c=document.querySelector(".menu-background"),n=document.querySelectorAll(".menu-toggle"),a=!1,r=0,l=0,u=0,m=0,v=!1,d=!1,b=0,f=0,y=0,L="",p=.5,g=function(){e.addEventListener("touchstart",h,!1),e.addEventListener("touchmove",k,!1),e.addEventListener("touchend",q,!1),c.addEventListener("click",D,!1),n.forEach(function(e){e.addEventListener("click",function(e){o.classList.contains("menu--visible")?D():(e.preventDefault(),o.classList.add("menu--background-visible"),requestAnimationFrame(function(){setTimeout(function(){o.classList.add("menu--visible"),o.classList.add("menu--animatable")},1)}))},!1)})};function h(e){s=(new Date).getTime(),r=e.touches[0].pageX,l=e.touches[0].pageY,a=!0,function(e,t){v=null!==document.querySelector(".mobile-menu.menu--visible");o.classList.add("no-transition"),i.classList.add("no-transition"),d=!0,b=document.querySelector(".app-menu").offsetWidth,f=e,t,y=v?0:-b;L="",o.classList.add("menu--background-visible")}(r,l)}function k(e){a&&(u=e.touches[0].pageX,m=e.touches[0].pageY,function(e,t,n,s,a){L||(L=Math.abs(s)>=Math.abs(a)?"horizontal":"vertical",requestAnimationFrame(E));if("vertical"===L)f=t,n;else{e.preventDefault(),y+(t-f)<0&&-b<y+(t-f)&&(y+=t-f),f=t,n,c.classList.add("no-transition");var o=100*Math.abs(y)/b,i=100-o,r=p*i/100;c.style.opacity!==r.toFixed(2)&&r.toFixed(1)%1!=0&&(c.style.opacity=r.toFixed(2))}}(e,u,m,u-r,m-l))}function q(e){if(a){a=!1;var t=u-r,n=(new Date).getTime()-s;!function(e,t,n,s,a){d=!1;0===e&&0===t?(v?i.classList.remove("no-transition"):o.classList.remove("menu--background-visible"),o.classList.remove("no-transition")):v=v?n<-b/2||.3<Math.abs(n)/a?(_(n),!1):(w(),!0):b/2<n||.3<Math.abs(n)/a?(w(),!0):(_(n),!1);o.classList.remove("no-transition"),i.classList.remove("no-transition"),c.classList.remove("no-transition"),o.classList.add("menu--animatable")}(u,m,t,0,n)}}function E(){if(d){var e=document.querySelector(".app-menu-container");e.style.transform="translateX("+y+"px)",e.style.webkitTransform="translateX("+y+"px)",requestAnimationFrame(E)}}function _(e){(e<0||!v)&&(i.style.transform="",i.style.webkitTransform="",o.classList.remove("menu--background-visible"),o.classList.remove("menu--visible"),o.addEventListener("transitionend",function e(){c.style.opacity="",c.style.display="",o.classList.remove("menu--background-visible"),o.classList.remove("menu--animatable"),o.removeEventListener("transitionend",e,!1)},!1));var t=document.body.classList;t.contains("js_show_contentoverlay")&&t.remove("js_show_contentoverlay"),t.contains("overlay_mah")&&t.remove("overlay_mah"),t.contains("overlay_gs")&&t.remove("overlay_gs"),t.contains("overlay_both")&&t.remove("overlay_both"),t.contains("overlay")&&t.remove("overlay")}function w(){i.style.transform="",i.style.webkitTransform="",o.classList.add("menu--visible"),o.classList.add("menu--background-visible"),c.style.opacity=""}function D(){o.addEventListener("transitionend",function e(){o.classList.remove("menu--background-visible"),o.classList.remove("menu--animatable"),c.style.display="",o.removeEventListener("transitionend",e)},!1),o.classList.remove("menu--visible")}t=document.querySelector(".app-menu-container"),e=t,s=(new Date).getTime(),g()}),$(function(){var e=$(".mobile-menu"),t=($(".menu-toggle",e),$(".submenu-toggle",e)),n=$(".submenu-closer",e);t.on("click",function(e){e.preventDefault(),$(this).toggleClass("open").parent().next("ul.subnav").toggleClass("open")}),n.each(function(){var t=$(this);t.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.closest("ul.subnav").removeClass("open")})})});